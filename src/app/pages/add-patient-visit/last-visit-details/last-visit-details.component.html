<form [formGroup]="lastVisitForm">
  <div class="container-fluid">
    <div class="card">
      <div class="card-body">
        <a class="back-btn d-inline-block mb-4" [routerLink]="['']">
          <i class="fa fa-arrow-left"></i>
          Patient Visit Details
        </a>
        <div class="table-title mb-1 edit">
          <h3 class="title mb-0">Patient Visit Details</h3>
        </div>
        <hr />
        <div class="user-container">
          <div class="flex-row">
            <div class="patient-avatar"></div>
            <p>{{lastVisitDetails.patientName}}</p>
          </div>
          <div class="flex-row">
            
            <a
              class="btn btn-psp-primary btn-new-visit btn-block"
              style="background-color: white; color: navy"
            >
              View EHR
            </a>
            <a
              class="btn btn-psp-primary btn-new-visit btn-block"
              style="background-color: white; color: navy; margin: 0"
            >
              Create RX
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <div class="table-title mb-1 edit">
          <h4 class="title mb-0">Patient Information</h4>
          <i
            (click)="op3.toggle($event); assignTitle('Edit data')"
            style="cursor: pointer"
            >edit</i
          >
        </div>
        <p-overlayPanel #op3>
          <!-- <over-lay [data]="title"></over-lay> -->
          <ng-template pTemplate>
            <add-visit [data]="lastVisitDetails" [type]="edit" ></add-visit>
          </ng-template>
        </p-overlayPanel>
        <div class="container">
          <span>
            <p>patient name</p>
            {{lastVisitDetails.patientName}}
          </span>
          <span>
            <p>patient phone number</p>
            {{lastVisitDetails.patientPhone}}
          </span>
        </div>
        <hr />
        <div class="table-title mb-1">
          <h4 class="title mb-0">Visit Information</h4>
        </div>
        <div class="container">
          <span>
            <p>visit type</p>
            {{lastVisitDetails.visitType}}
          </span>
          <span>
            <p>visit date</p>
            {{lastVisitDetails.visitDate}}
          </span>
        </div>
        <hr />
        <div class="table-title mb-1">
          <h4 class="title mb-0">Insurance Information</h4>
        </div>
        <div class="container">
          <span>
            <p>Patient type</p>
            {{lastVisitDetails.patientType}}
          </span>
        </div>
        <hr />
        <div class="table-title mb-1">
          <h4 class="title mb-0">Amount Details</h4>
        </div>
        <div class="container">
          <span>
            <p>Money recieved</p>
            {{lastVisitDetails.visitAmount}}
          </span>
          <span>
            <p>Discount applied</p>
            {{lastVisitDetails.visitDiscount}}
          </span>
        </div>
        <div class="d-flex justify-content-end">
          
          <p-overlayPanel
            class="custom-overlay-panel"
            style="
              background-color: transparent;
              padding: 0;
              max-width: fit-content;
              max-height: fit-content;
            "
            #op2
          >
            <form action="">
              <div class="container-fluid">
                <div class="card">
                  <div class="card-body">
                    <div class="table-title mb-1">
                      <h3 class="title mb-0">
                        Are you sure you want to delete this visit ?
                      </h3>
                    </div>
                    this will delete this patients visit .
                    <div class="flex-row">
                      <a
                        class="btn btn-psp-primary btn-new-visit btn-block"
                        style="background-color: white; color: navy"
                      >
                        Cancel
                      </a>
                      <a
                        class="btn btn-psp-primary btn-new-visit btn-block"
                        style="margin: 0; color: white"
                      >
                        Delete
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </p-overlayPanel>
          <button
            (click)="op2.toggle($event)"
            class="btn btn-psp-primary btn-new-visit"
            style="background-color: white; color: navy"
          >
            Delete
          </button>
          <p-overlayPanel #op>
            <!-- <over-lay [data]="title"></over-lay> -->
            <ng-template pTemplate>
              <add-visit [data]="lastVisitDetails" [type]="revisit"></add-visit>
            </ng-template>
          </p-overlayPanel>
          <button
            (click)="op.toggle($event); assignTitle('Add a Revisit')"
            class="btn btn-psp-primary btn-new-visit"
          >
            Revisit
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
